# m-hub 部署说明

## 部署架构

```
GitHub Actions
     │
     ▼ 构建
   dist/
     │
     ▼ 上传
   OSS / Nginx
     │
     ▼
https://m.lytt.fun
```

## 部署方式

### 方式一：OSS 静态托管（推荐）

1. 构建项目

```bash
pnpm build
```

2. 上传 `dist/` 目录到 OSS

3. 配置 OSS 静态网站托管
   - 默认首页：index.html
   - 绑定域名：m.lytt.fun

### 方式二：Nginx 托管

1. 上传 `dist/` 到服务器 `/app/m-hub/`

2. Nginx 配置

```nginx
server {
    listen 80;
    server_name m.lytt.fun;
    root /app/m-hub;

    location / {
        try_files $uri $uri/ $uri.html =404;
    }
}
```

## GitHub Actions 自动部署

```yaml
name: Deploy m-hub

on:
  push:
    branches: [master]
  workflow_dispatch:

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4

      - uses: pnpm/action-setup@v2
        with:
          version: 9

      - uses: actions/setup-node@v4
        with:
          node-version: 22
          cache: pnpm

      - run: pnpm install
      - run: pnpm build

      # 上传到 OSS
      - name: Upload to OSS
        uses: manyuanrong/setup-ossutil@v2.0
        with:
          access-key-id: ${{ secrets.OSS_ACCESS_KEY_ID }}
          access-key-secret: ${{ secrets.OSS_ACCESS_KEY_SECRET }}
          endpoint: oss-cn-beijing.aliyuncs.com

      - run: ossutil cp -rf dist/ oss://your-bucket/
```

## 注意事项

1. 活动页使用 HashRouter，无需服务端配置
2. 静态页面直接访问 `.html` 文件
3. 构建后检查 `dist/` 目录结构是否正确
